<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/materializeRegister :: styleHead('Register')"></head>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>


<body>

<div th:replace="partials/navbar.html :: navbar"></div>
<main>
    <div class="container">
        <h1>Create an Account</h1>

        <div th:if="${!param.isEmpty()}">
            <div>
                <div class="errorMsg" th:if="${param.username}">
                    <i class="material-icons">error</i>Username already exists or is blank.
                </div>
                <div class="errorMsg" th:if="${param.email}">
                    <i class="material-icons">error</i>Email already exists or is blank.
                </div>
                <div class="errorMsg" th:if="${param.password}">
                    <i class="material-icons">error</i>Password does not match or is blank.
                </div>
                <div class="errorMsg" th:if="${param.quality}">
                    <i class="material-icons">error</i>Password must be 8-20 characters, contain 1 Uppercase, and 1 number.
                </div>
                <div class="errorMsg" th:if="${param.about}">
                    <i class="material-icons">error</i>Please add a little information about you.
                </div>
                <div class="errorMsg" th:if="${param.captcha}">
                    <i class="material-icons">error</i>Please verify you are not a robot.
                </div>
            </div>
        </div>

        <div class="row">
            <form class="col s12" th:action="@{/register}" th:method="POST" th:object="${user}">
                <div class="row">
                    <div class="input-field col s12" style="display: flex;">
                        <i class="material-icons">account_circle</i>
                        <input id="username" type="text" class="validate" th:field="*{username}"/>
                        <label class="labelIcon" for="username">Username</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12" style="display: flex;">
                        <i class="material-icons">lock</i>
                        <input id="password" type="password" class="validate" th:field="*{password}">
                        <label class="labelIcon" for="password">Password</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12" style="display: flex">
                        <i class="material-icons">lock</i>
                        <input id="confirmPass" type="password" class="validate" name="confirm-password">
                        <label class="labelIcon" for="confirmPass">Confirm Password</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12" style="display:flex;">
                        <i class="material-icons">email</i>
                        <input id="email" type="email" class="validate" th:field="*{email}">
                        <label class="labelIcon" for="email">Email</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12" style="display: flex">
                        <i class="material-icons">edit</i>
                        <label class="labelIcon" for="body">About Me</label>
                        <textarea class="materialize-textarea" id="body" th:field="*{aboutMe}"></textarea>
                        <a class="waves-effect waves-light" onclick="$('.tap-target').tapTarget('open')"><i class="material-icons">live_help</i></a>
                    </div>

                </div>

                <div class="row" id="recaptcha-row">
                    <!--                    <div class="g-recaptcha" th:data-sitekey="${@environment.getProperty('recaptcha.testing.site.key')}"></div>-->
                    <div class="g-recaptcha" th:data-sitekey="${@environment.getProperty('recaptcha.checkbox.site.key')}">

                    </div>

                </div>
                <div class="row" id="sign-up-btn-row">



                <button class="btn waves-effect waves-light" type="submit" name="action"><a>Sign Up
                    <i class="material-icons right">send</i></a>
                </button>
                </div>

            </form>
            <div class="tap-target" data-target="menu">
                <div class="tap-target-content" id="registerDiscovery">
                    <h5>About Me</h5>
                    <p>This will be for other users on the site to see when they visit your profile. Please add some information about you and your interests along with something that you are hoping to find here and collaborate on!</p>
                </div>
            </div>
        </div>
    </div>
    <div class="hide">
    <a id="menu" class="waves-effect waves-light btn btn-floating" ><i class="material-icons">menu</i></a>
    </div>
</main>

<div th:replace="partials/footer.html :: footer"></div>
<div th:replace="partials/materializescripts :: scripts"></div>

</body>
</html>
